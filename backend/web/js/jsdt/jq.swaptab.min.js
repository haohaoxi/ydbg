/* =============================================================================*\
 * jQuery 滑动门插件															 	 |
 * @author narky<narky05@gmail.com>												 |
 * 2012-08-17 update: 															 |
 * 1.增加默认显示第几块的选项													 	 |
 * 2.支持自动more链接切换														 	 |
 * 																				 |
 * 可选参数:																	 	 |
 * 																				 |
 * 	"tabClass" 	: 'active'	tab的高亮css class名								 	 |
 *	"mouseEvt" 	: 'click'	tab的鼠标动作，默认是点击，滑动: mouseover			 	 |
 *	"start" 	: 1,		一开始显示的块，默认第一个							 	 |
 *	"more" 		: ''		如果开启more链接切换，在这里写more链接的 ID 或 Class		 |
 *  "link"		: false    	是否需要链接
 *	"showErr" 	: 0 		如果设置为 1 则开启检测tab和显示块数量是否符合的功能		 |
 * 																				 |
 * =============================================================================*/
(function(a){a.fn.swaptab=function(e){var c=a.extend(a.fn.swaptab.defaults,e);var i=a(this).children("a");var b=c.bCon!=null?a(c.bCon).children("div"):a("#"+a(this).attr("id")+"_con").children("div");c.bCon=null;var f=c.tabClass;var g=c.mouseEvt;var d=(parseInt(c.start)>0)?parseInt(c.start)-1:0;var k=jQuery.trim(c.more);var h=c.link;var j=Array();if(c.showErr==1&&b.length!=i.length){alert("SwapTab：TAB和需要显示块的数量不符合，请检查HTML代码！")}else{b.each(function(){a(this).hide()});a(b.get(d)).show();if(k!=""){a(k).attr("href",a(i.get(d)).attr("href")).attr("target",a(i.get(d)).attr("target"))}i.each(function(m,l){if(k!=""){var n=a(this).attr("href");var o=a(this).attr("target");j.push({link:n,target:o})}a(this).removeClass(f);if(!h){a(this).attr("href","javascript:void(0);").attr("target","")}a(i.get(d)).addClass(f);a(this).bind(g,function(){i.each(function(){a(this).removeClass(f)});b.each(function(){a(this).hide()});a(l).addClass(f);a(b.get(m)).show();if(k!=""){var p=j[m];a(k).attr("href",p.link).attr("target",p.target)}})})}};a.fn.swaptab.defaults={tabClass:"active",mouseEvt:"click",start:1,more:"",link:false,showErr:0}})(jQuery);